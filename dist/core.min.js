(()=>{"use strict";var e={8957:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.WINDOW="window",e.REDIRECT="redirect",e.CODE="code"}(o||(o={})),t.default=o},71:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PASSWORD="password",e.FACEBOOK="facebook",e.GRAPHAND="graphand"}(o||(o={})),t.default=o},8139:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.UNKNOWN="UNKNOWN",e.VALIDATION_FAILED="VALIDATION_FAILED",e.INVALID_ADAPTER="INVALID_ADAPTER",e.INVALID_BODY="INVALID_BODY",e.INVALID_MODEL_ADAPTER="INVALID_MODEL_ADAPTER",e.INVALID_MODEL_SLUG="INVALID_MODEL_SLUG",e.INVALID_OPERATION="INVALID_OPERATION",e.UNAUTHORIZED="UNAUTHORIZED",e.FORBIDDEN="FORBIDDEN",e.INTERNAL_ERROR="INTERNAL_ERROR",e.TOKEN_EXPIRED="TOKEN_EXPIRED",e.TOKEN_MAX_GEN="TOKEN_MAX_GEN",e.NOT_FOUND="NOT_FOUND",e.INVALID_PARAMS="INVALID_PARAMS",e.INVALID_TOKEN="INVALID_TOKEN",e.INVALID_SUBQUERY="INVALID_SUBQUERY",e.INVALID_INVITATION="INVALID_INVITATION",e.INVALID_CONFIG="INVALID_CONFIG",e.REQUEST_TIMEOUT="REQUEST_TIMEOUT",e.SCRIPT_EXECUTION_ERROR="SCRIPT_EXECUTION_ERROR",e.EXECUTION_ABORTED="EXECUTION_ABORTED",e.SOCKETHOOK_TIMEOUT="SOCKETHOOK_TIMEOUT",e.SOCKETHOOK_HANDLER_NOT_FOUND="SOCKETHOOK_HANDLER_NOT_FOUND",e.SOCKETHOOK_HANDLER_DISCONNECTED="SOCKETHOOK_HANDLER_DISCONNECTED",e.SOCKETHOOK_EXECUTION_ERROR="SOCKETHOOK_EXECUTION_ERROR",e.SOCKETHOOK_SIGNATURE_MISMATCH="SOCKETHOOK_SIGNATURE_MISMATCH",e.SOCKETHOOK_DEADLOCK="SOCKETHOOK_DEADLOCK",e.STRIPE_ERROR="STRIPE_ERROR",e.EXCEPTION="EXCEPTION",e.PLAN_LIMIT_REACHED="PLAN_LIMIT_REACHED",e.HARD_LIMIT_REACHED="HARD_LIMIT_REACHED"}(o||(o={})),t.default=o},5590:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ID="id",e.ARRAY="array",e.TEXT="text",e.NUMBER="number",e.BOOLEAN="boolean",e.RELATION="relation",e.DATE="date",e.NESTED="nested",e.IDENTITY="identity"}(o||(o={})),t.default=o},5194:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.USER="user",e.ACCOUNT="account",e.REFRESH="refresh",e.TOKEN="token",e.ROLE="role"}(o||(o={})),t.default=o},8250:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.QUEUED="queued",e.RUNNING="running",e.COMPLETED="completed",e.FAILED="failed"}(o||(o={})),t.default=o},391:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SYNC_SEARCH="syncSearch",e.INIT_BACKUP="initBackup",e.INIT_ENVIRONMENT="initEnvironment",e.INIT_MERGE_REQUEST="initMergeRequest",e.RESTORE_BACKUP="restoreBackup",e.APPROVE_MERGE_REQUEST="approveMergeRequest",e.PATCH_MERGE_REQUEST="patchMergeRequest",e.SANDBOX_MERGE_REQUEST="sandboxMergeRequest"}(o||(o={})),t.default=o},6361:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COMMENT="comment",e.APPROVE="approve",e.REJECT="reject",e.SANDBOX="sandbox",e.PATCH="patch"}(o||(o={})),t.default=o},2983:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.STATIC="static",e.QUERY="query"}(o||(o={})),t.default=o},7640:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.GLOBAL="global",e.PROJECT="project",e.ENV="env"}(o||(o={})),t.default=o},2201:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EMAIL="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",e.SLUG="^[a-zA-Z0-9]([a-zA-Z0-9_\\-\\.\\:@]+?)?$"}(o||(o={})),t.default=o},6556:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CREATE="create",e.READ="read",e.UPDATE="update",e.DELETE="delete",e.COUNT="count",e.LOGIN="login",e.REGISTER="register",e.EXECUTE="execute",e.ALL="all"}(o||(o={})),t.default=o},9012:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.JSON="json",e.OBJECT="object",e.DOCUMENT="document",e.NEXT_FIELD="nextField",e.VALIDATION="validation"}(o||(o={})),t.default=o},2361:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.REQUIRED="required",e.UNIQUE="unique",e.BOUNDARIES="boundaries",e.LENGTH="length",e.REGEX="regex",e.SAMPLE="sample",e.KEY_FIELD="keyField",e.DATAMODEL_SLUG="datamodelSlug",e.DATAMODEL_DEFINITION="datamodelDefinition"}(o||(o={})),t.default=o},341:function(e,t,o){var i=this&&this.__createBinding||(Object.create?function(e,t,o,i){void 0===i&&(i=o);var a=Object.getOwnPropertyDescriptor(t,o);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,i,a)}:function(e,t,o,i){void 0===i&&(i=o),e[i]=t[o]}),a=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||i(t,e,o)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFieldsMap=t.ErrorCodes=t.controllersMap=t.ValidationValidatorError=t.ValidationFieldError=t.getValidatorFromDefinition=t.getFieldFromDefinition=t.MergeRequestEventTypes=t.MergeRequestTypes=t.JobStatus=t.JobTypes=t.Patterns=t.IdentityTypes=t.AuthMethods=t.AuthProviders=t.ValidationError=t.CoreError=t.ValidatorTypes=t.Validator=t.Field=t.RuleActions=t.SerializerFormat=t.PromiseModelList=t.PromiseModel=t.FieldTypes=t.ModelEnvScopes=t.Data=t.models=t.User=t.Token=t.Terms=t.Sockethook=t.SearchConfig=t.Role=t.Project=t.Organization=t.MergeRequestEvent=t.MergeRequest=t.Media=t.Key=t.Job=t.Environment=t.DataModel=t.Backup=t.AuthProvider=t.AccountAuthProvider=t.Account=t.Adapter=t.ModelList=t.Model=void 0,t.crossFields=t.fieldDecorator=t.modelDecorator=t.getArrayItemsFieldsMap=t.getArrayValidatorsArray=t.getNestedValidatorsArray=t.validateModel=t.getAdaptedModel=t.defineFieldsProperties=t.getNestedFieldsMap=t.getFieldsPathsFromPath=t.defaultValidatorsMap=void 0,o(4089);const r=s(o(8395));t.Model=r.default;const l=s(o(3846));t.DataModel=l.default;const d=s(o(9114));t.Account=d.default;const n=s(o(8091));t.AccountAuthProvider=n.default;const c=s(o(3232));t.AuthProvider=c.default;const u=s(o(367));t.Backup=u.default;const f=s(o(7888));t.Job=f.default;const p=s(o(6875));t.Project=p.default;const h=s(o(9407));t.User=h.default;const y=s(o(7808));t.Role=y.default;const g=s(o(2624));t.SearchConfig=g.default;const _=s(o(1101));t.Key=_.default;const m=s(o(886));t.Organization=m.default;const E=s(o(3731));t.Media=E.default;const O=s(o(8439));t.MergeRequest=O.default;const v=s(o(2728));t.MergeRequestEvent=v.default;const D=s(o(3646));t.Sockethook=D.default;const R=s(o(2976));t.Token=R.default;const b=s(o(7663));t.Terms=b.default;const A=s(o(5577));t.Environment=A.default;const T=s(o(2140));t.ModelList=T.default;const j=s(o(7640));t.ModelEnvScopes=j.default;const M=s(o(5590));t.FieldTypes=M.default;const N=s(o(5286));t.PromiseModel=N.default;const P=s(o(9781));t.PromiseModelList=P.default;const I=s(o(8099));t.Data=I.default;const F=s(o(9012));t.SerializerFormat=F.default;const S=s(o(6556));t.RuleActions=S.default;const w=s(o(4111));t.Adapter=w.default;const L=s(o(867));t.Field=L.default;const U=s(o(6638));t.Validator=U.default;const x=s(o(2361));t.ValidatorTypes=x.default;const k=s(o(8139));t.ErrorCodes=k.default;const C=s(o(2402));t.CoreError=C.default;const V=s(o(797));t.ValidationError=V.default;const B=s(o(7391));t.controllersMap=B.default;const X=s(o(9647));t.ValidationFieldError=X.default;const z=s(o(348));t.ValidationValidatorError=z.default;const K=s(o(7571));t.defaultFieldsMap=K.default;const q=s(o(5852));t.defaultValidatorsMap=q.default;const Q=s(o(71));t.AuthProviders=Q.default;const J=s(o(8957));t.AuthMethods=J.default;const G=s(o(5194));t.IdentityTypes=G.default;const $=s(o(2201));t.Patterns=$.default;const H=s(o(391));t.JobTypes=H.default;const Y=s(o(8250));t.JobStatus=Y.default;const W=s(o(2983));t.MergeRequestTypes=W.default;const Z=s(o(6361));t.MergeRequestEventTypes=Z.default;const ee=o(5726);Object.defineProperty(t,"getFieldFromDefinition",{enumerable:!0,get:function(){return ee.getFieldFromDefinition}}),Object.defineProperty(t,"getValidatorFromDefinition",{enumerable:!0,get:function(){return ee.getValidatorFromDefinition}}),Object.defineProperty(t,"getFieldsPathsFromPath",{enumerable:!0,get:function(){return ee.getFieldsPathsFromPath}}),Object.defineProperty(t,"getNestedFieldsMap",{enumerable:!0,get:function(){return ee.getNestedFieldsMap}}),Object.defineProperty(t,"defineFieldsProperties",{enumerable:!0,get:function(){return ee.defineFieldsProperties}}),Object.defineProperty(t,"getAdaptedModel",{enumerable:!0,get:function(){return ee.getAdaptedModel}}),Object.defineProperty(t,"validateModel",{enumerable:!0,get:function(){return ee.validateModel}}),Object.defineProperty(t,"getArrayItemsFieldsMap",{enumerable:!0,get:function(){return ee.getArrayItemsFieldsMap}}),Object.defineProperty(t,"getNestedValidatorsArray",{enumerable:!0,get:function(){return ee.getNestedValidatorsArray}}),Object.defineProperty(t,"getArrayValidatorsArray",{enumerable:!0,get:function(){return ee.getArrayValidatorsArray}}),Object.defineProperty(t,"crossFields",{enumerable:!0,get:function(){return ee.crossFields}});const te=o(317);Object.defineProperty(t,"modelDecorator",{enumerable:!0,get:function(){return te.modelDecorator}});const oe=o(2580);Object.defineProperty(t,"fieldDecorator",{enumerable:!0,get:function(){return oe.fieldDecorator}}),a(o(7683),t);const ie={Account:d.default,AccountAuthProvider:n.default,AuthProvider:c.default,Backup:u.default,DataModel:l.default,Environment:A.default,Job:f.default,Key:_.default,Media:E.default,MergeRequest:O.default,MergeRequestEvent:v.default,Organization:m.default,Project:p.default,Role:y.default,SearchConfig:g.default,Sockethook:D.default,Terms:b.default,Token:R.default,User:h.default};t.models=ie},4111:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static _modelsMap;fetcher;fieldsMap;validatorsMap;model;runValidators;constructor(e){this.model=e}static get modelsMap(){return this._modelsMap??=new Map,this._modelsMap}get base(){return this.constructor}}},2402:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(o(8139));class s extends Error{#e;constructor(e={}){super();const{constructor:t}=Object.getPrototypeOf(this);"captureStackTrace"in Error&&Error.captureStackTrace(this,t),this.#e=e,Object.defineProperty(this,"__definition",{enumerable:!1})}get code(){return this.#e.code??a.default.UNKNOWN}get message(){return this.#e.message??"Unknown error"}set code(e){this.#e.code=e}set message(e){this.#e.message=e}toJSON(){return{type:"CoreError",code:this.code,message:this.message}}}t.default=s},8099:function(e,t,o){var i,a=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=o(317),d=s(o(7640)),n=o(5726);let c=i=class extends r.default{static searchable=!0;static extensible=!0;static scope=d.default.ENV;static __getFromSlug(e,t){let o=t?.modelsMap.get(e);return o||(o=class extends i{static __name=`Data<${e}>`;static slug=e},t&&(o=o.withAdapter(t),t.modelsMap.set(e,o))),o}static getFromDatamodel(e,t){let o=class extends i{static __name=e.name;static slug=e.slug};return t??=e.model.getAdapter(!1)?.base,t&&(o=o.withAdapter(t),t.modelsMap.set(e.slug,o)),(0,n.assignDatamodel)(o,e),t&&(o.__initPromise=(0,n.getModelInitPromise)(o,{datamodel:e})),o}};c=i=a([(0,l.modelDecorator)()],c),t.default=c},867:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=o(5726);t.default=class{#e;#t;nextFieldEqObject=!0;constructor(e,t){this.#e=e,this.#t=t,Object.defineProperty(this,"__json",{enumerable:!0,value:this.toJSON()})}get type(){return this.#e.type}get path(){return this.#t}get definition(){return this.#e}get options(){const e=(0,i.getDefaultFieldOptions)(this.type);return Object.assign({},e,this.#e.options??{})}async validate(e,t,o){return!0}serialize(e,t,o,i={}){return e}toJSON(){return{type:this.type,options:this.options,path:this.#t}}}},8395:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(5286)),l=s(o(9781)),d=o(2580),n=s(o(5590)),c=s(o(9012)),u=o(5726),f=s(o(2402)),p=s(o(8139));class h{static extensible=!1;static searchable=!1;static exposed=!0;static systemFields=!0;static allowMultipleOperations=!0;static slug;static scope;static controllersScope;static freeMode=!1;static definition;static adapterClass;static __name="Model";static __hooks;static __initOptions;static __initPromise;static __adapter;static __fieldsMap;static __validatorsArray;static __fieldsKeys;static __fieldsProperties;static __baseClass;static __dm;#o;_id;_createdAt;_createdBy;_updatedAt;_updatedBy;constructor(e={}){if(!e||"object"!=typeof e)throw new f.default({message:`Invalid document: ${e}`});this.#o=e,this.#o._id??=Date.now()}get model(){return this.constructor}static isSingle(){return Boolean(this.definition?.single)}static getKeyField(){return this.getBaseClass().definition?.keyField??this.definition?.keyField??"_id"}getDoc(){return this.#o}getKey(e){const t=this.model.getKeyField();if(!t)throw new f.default({message:`Invalid keyField for model ${this.model.slug} : ${t}`});return this.get(this.model.getKeyField(),e)}getId(e){return this.get("_id",e)}setDoc(e){this.#o=e}clone(){const e=JSON.parse(JSON.stringify(this.#o));return new this.model(e)}static clone(e){const t=this.getBaseClass(),o=class extends t{static __initOptions=e};if(Object.defineProperty(o,"name",{value:this.__name}),this.__adapter){const e=new(0,this.__adapter.base)(o);o.__adapter=e}return o}static getBaseClass(){return this.hasOwnProperty("__baseClass")&&this.__baseClass?this.__baseClass:this}static withAdapter(e,t){const o=this.getBaseClass(),i=class extends(this){static __baseClass=o};Object.defineProperty(i,"name",{value:this.__name});const a=new e(i);return i.__adapter=a,t?.forEach((e=>e(i))),i}static async initialize(){if(this.hasOwnProperty("__initPromise"))return this.__initPromise;let e={};return this.hasOwnProperty("__initOptions")&&(e=this.__initOptions),this.__initPromise=(0,u.getModelInitPromise)(this,e),this.__initPromise}static async reloadModel(e){let t=e?.datamodel;const i=this.getAdapter();if(!t){const a=o(3846).default;t=await(0,u.getAdaptedModel)(a,i.base).get({filter:{slug:this.slug}},e?.ctx)}return(0,u.assignDatamodel)(this,t),t}static get fieldsMap(){return this.__fieldsMap??=(0,u.createFieldsMap)(this),this.__fieldsMap}static get fieldsKeys(){return this.__fieldsKeys??=Array.from(this.fieldsMap.keys()),this.__fieldsKeys}static get validatorsArray(){return this.__validatorsArray??=(0,u.createValidatorsArray)(this),this.__validatorsArray}static getFromSlug(e,t,i=!0){t||(t=this.getAdapter(!1)?.base);const a=o(341).models;let s=Object.values(a).find((t=>t.slug===e));if(s){let e=t?.modelsMap.get(s.slug);!e&&t&&(e=s.withAdapter(t),t.modelsMap.set(s.slug,e)),s=e||s}else i&&(s=o(8099).default.__getFromSlug(e,t));return s}get(e,t=c.default.OBJECT,o={},i){let a;const s={...o,outputFormat:t};if(e.includes(".")){const t=e.split(".");a=(0,u.getFieldsPathsFromPath)(this.model,[...t])}else{const t=this.model.fieldsMap.get(e);t&&(a=[{field:t,key:e}])}if(!a?.length)return this.model.freeMode?this.#o[e]:void 0;const r=a[0].field;if(i??=this.#o[r.path],(s?.defaults??t!==c.default.DOCUMENT)&&void 0===i&&"default"in r.options&&(i=r.options.default),null==i)return i;if(1===a.length)return r.serialize(i,t,this,s);{const e=Symbol("noField"),o=r.serialize(i,c.default.NEXT_FIELD,this,s),l=(0,u._getter)({_value:o,_fieldsPaths:a.splice(1),format:t,ctx:s,noFieldSymbol:e,from:this});return l===e?void 0:l}}set(e,t,o){const i=e;let a;const s=()=>{throw new f.default({message:`Field ${i} is not found in model ${this.model.slug}`})};if(i.includes(".")){const e=i.split(".");a=(0,u.getFieldsPathsFromPath)(this.model,[...e]),a.includes(null)&&s()}else a=[{key:i,field:this.model.fieldsMap.get(i)}];return(0,u._setter)({_assignTo:this.#o,_value:t,_fieldsPaths:a,_throw:s,ctx:o,from:this})}serialize(e,t={},o=!1,i){(0,u.defineFieldsProperties)(this);const a=i??this.model.fieldsKeys,s={};return a.forEach((i=>{const a=this.get(i,e,t);o&&void 0===a||(s[i]=a)})),s}toJSON(){return this.serialize(c.default.JSON)}toObject(){return this.serialize(c.default.OBJECT)}toDocument(){return this.serialize(c.default.DOCUMENT)}toString(){return JSON.stringify(this.#o)}static fromString(e,t=!0){const o=JSON.parse(e);let i=o;if(t){const e={};this.fieldsKeys.forEach((t=>{e[t]=o[t]})),i=e}return new this(i)}static async count(e={},t){return new Promise((async(o,i)=>{try{if(await this.initialize(),this.isSingle())return o(1);o(await this.execute("count",[e],t))}catch(e){i(e)}}))}static get(e={},t){return new r.default([async(o,i)=>{try{await this.initialize(),o(await this.execute("get",[e],t))}catch(e){i(e)}}],this,e)}static getList(e={},t){return new l.default([async(o,i)=>{try{await this.initialize(),o(await this.execute("getList",[e],t))}catch(e){i(e)}}],this,e)}static async create(e,t){if(Array.isArray(e))throw new f.default({code:p.default.INVALID_PARAMS,message:"Payload is an array, use createMultiple instead"});return await this.initialize(),await this.execute("createOne",[e],t)}static async createMultiple(e,t){return await this.initialize(),await this.execute("createMultiple",[e],t)}async update(e,t){const o=await this.model.execute("updateOne",[String(this._id),e],t);if(!o?.getDoc?.())throw new f.default({message:`Unable to update model: ${o instanceof h}`});return this.#o=o.#o,this}static async update(e={},t,o){return await this.initialize(),"string"==typeof e?[await this.execute("updateOne",[e,t],o)]:await this.execute("updateMultiple",[e,t],o)}async delete(e){return await this.model.initialize(),await this.model.execute("deleteOne",[String(this._id)],e),this}static async delete(e={},t){return await this.initialize(),"string"==typeof e?await this.execute("deleteOne",[e],t)?[e]:[]:await this.execute("deleteMultiple",[e],t)}static hook(e,t,o,i=0){const a=this.getBaseClass();!this.allowMultipleOperations&&["createMultiple","updateMultiple","deleteMultiple"].includes(t)&&console.warn(`Useless hook ${t} on a model with allowMultipleOperations disabled (${this.slug})`),a.hasOwnProperty("__hooks")&&a.__hooks||(a.__hooks=new Set);const s={phase:e,action:t,fn:o,order:i};a.__hooks.add(s)}static async validate(e,t){return await(0,u.validateModel)(this,e,t)}static getAdapter(e=!0){let t;const o=this.getBaseClass(),i=o?.adapterClass;if(this.hasOwnProperty("__adapter")?t=this.__adapter:i&&(this.__adapter=new i(this),t=this.__adapter),!t&&e)throw new f.default({code:p.default.INVALID_ADAPTER,message:`invalid adapter on model ${this.__name}. Please define an adapter for this model or a global adapter class on Model.adapterClass`});return t}static hasAdapterClassChanged(){const e=this.getAdapter(!1);return!!e&&e.base!==this.adapterClass}static async executeHooks(e,t,o,i){await(0,u.getRecursiveHooksFromModel)(this,t,e).reduce((async(e,t)=>{await e;try{await t.fn.call(this,o)}catch(e){if(i===e)throw new f.default({code:p.default.EXECUTION_ABORTED,message:`execution on model ${this.__name} has been aborted`});o.err??=[],o.err.push(e)}}),Promise.resolve())}static async execute(e,t,o={}){if(!o?.forceOperation){if(this.isSingle()&&["getList","createOne","createMultiple","updateMultiple","deleteOne","deleteMultiple"].includes(e))throw new f.default({code:p.default.INVALID_OPERATION,message:`Cannot run ${e} operation on a single model (${this.slug})`});if(!this.allowMultipleOperations&&["createMultiple","updateMultiple","deleteMultiple"].includes(e))throw new f.default({code:p.default.INVALID_OPERATION,message:`Cannot run ${e} operation a model with allowMultipleOperations disabled (${this.slug})`})}const i=Symbol(),a=Symbol(),s={model:this,action:e,args:t},r={...o,retryToken:i,abortToken:a,transaction:s},l={args:t,ctx:r,err:void 0};let d;if(await this.executeHooks("before",e,l,a),!l.err?.length)try{const t=this.getAdapter().fetcher[e];d=await t.apply(t,[l.args,r])}catch(e){l.err??=[],l.err.push(e)}if(l.err?.includes(i))return await this.execute(e,t,r);const n={...l,res:d};if(await this.executeHooks("after",e,n,a),n.err?.length){if(n.err.includes(i))return await this.execute(e,t,r);throw n.err[0]}return n.res}}i([(0,d.fieldDecorator)(n.default.ID),a("design:type",String)],h.prototype,"_id",void 0),i([(0,d.fieldDecorator)(n.default.DATE),a("design:type",Object)],h.prototype,"_createdAt",void 0),i([(0,d.fieldDecorator)(n.default.IDENTITY),a("design:type",Object)],h.prototype,"_createdBy",void 0),i([(0,d.fieldDecorator)(n.default.DATE),a("design:type",Object)],h.prototype,"_updatedAt",void 0),i([(0,d.fieldDecorator)(n.default.IDENTITY),a("design:type",Object)],h.prototype,"_updatedBy",void 0),globalThis.Model=h,t.default=h},2140:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class extends Array{#i;#a;#s;#r;constructor(e,t=[],o,i){super(...t),this.#i=e,this.#a=o,this.#s=i}get model(){return this.#i}get query(){return this.#a||{}}get count(){return this.#s||this.length||0}get loading(){return Boolean(this.#r)}get lastUpdated(){let e,t;for(const o of this){const i=o._updatedAt?.getTime()??o._createdAt?.getTime();(void 0===t||void 0!==i&&i>t)&&(e=o,t=i)}return e}async reload(){return this.#r??=new Promise((async(e,t)=>{try{const{model:t,query:o}=this,i=await t.getList(o);this.splice(0,this.length,...i),this.#s=i.count,e()}catch(e){t(e)}})).finally((()=>{this.#r=void 0})),this.#r}toArray(){const e=[];for(const t of this)e.push(t);return e}getIds(){const e=[];for(const t of this)e.push(t._id);return e}toJSON(){return{rows:this.toArray().map((e=>e.toJSON())),count:this.#s}}}},5286:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(o(4395)),s=o(5726);class r extends a.default{#i;#a;constructor(e,t,o){super(e),this.#i=t,this.#a=o}get _id(){const e=this.query;return(0,s.isObjectId)(e)?e:"_id"in e&&(0,s.isObjectId)(e._id)?e._id:null}get model(){return this.#i}get query(){return this.#a}get[Symbol.toStringTag](){return`PromiseModel<${this.model.__name}>(${this._id})`}}t.default=r},9781:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(o(4395));class s extends a.default{#i;#a;constructor(e,t,o){super(e),this.#i=t,this.#a=o}get model(){return this.#i}get query(){return this.#a}getIds(){return this.query?.ids?Array.isArray(this.query.ids)?this.query.ids:[this.query.ids]:[]}get[Symbol.toStringTag](){return`PromiseModelList<${this.model.__name}>(${JSON.stringify(this.#a)})`}}t.default=s},4395:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{#l;#d=null;constructor(e){this.#l=Array.isArray(e)?e:[e]}get promise(){return this.#d??=new Promise(...this.#l),this.#d}then(e,t){return this.promise.then(e,t)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}}},797:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(o(2402)),s=i(o(8139));class r extends a.default{fields;validators;constructor({fields:e,validators:t,...o}){super(o),this.fields=e??[],this.validators=t??[],Object.defineProperty(this,"fieldsPaths",{enumerable:!0,value:this.fieldsPaths})}get code(){return s.default.VALIDATION_FAILED}get fieldsPaths(){return[...this.fields.map((e=>e.field?.path)),...this.validators.map((e=>e.validator.getFullPath()))]}get message(){let e="Validation failed";const t=[];if(this.fields.length&&t.push(`${this.fields.length} field${this.fields.length>1?"s":""} validation (${this.fields.map((e=>e.slug)).join(", ")})`),this.validators.length){let e=`${this.validators.length} model validator${this.validators.length>1?"s":""} (${this.validators.map((e=>e.validator.type)).join(", ")})`;const o=this.validators.filter((e=>void 0!==e.value)).map((e=>e.value));o.length&&(e+=` for value${o.length>1?"s":""} ${o.join(", ")}`),t.push(e)}return t.length&&(e+=` with ${t.join(" and ")}`),this.fieldsPaths?.length&&(e+=` on path${this.fieldsPaths.length>1?"s":""} ${this.fieldsPaths.join(", ")}`),e}toJSON(){const e={...super.toJSON(),type:"ValidationError",fieldsPaths:this.fieldsPaths,reason:{fields:this.fields.map((e=>e.toJSON())),validators:this.validators.map((e=>e.toJSON()))}};return delete e.code,e}}t.default=r},9647:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{#e;constructor(e){this.#e=e}get slug(){return this.#e.slug}get field(){return this.#e.field}get validationError(){return this.#e.validationError}toJSON(){return{slug:this.slug,field:this.field?.toJSON(),validationError:this.validationError?.toJSON()}}}},348:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{#e;constructor(e){this.#e=e}get validator(){return this.#e.validator}get value(){return this.#e.value}toJSON(){return{validator:this.validator.toJSON(),value:this.value}}}},6638:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=o(5726);t.default=class{#e;#t;hooks;constructor(e,t){this.#e=e,this.#t=t,Object.defineProperty(this,"__json",{enumerable:!0,value:this.toJSON()})}get type(){return this.#e.type}get path(){return this.#t}get options(){const e=(0,i.getDefaultValidatorOptions)(this.type);return Object.assign({},e,this.#e.options??{})}getFullPath(){return[this.#t,this.options.field].filter(Boolean).join(".")}getKey(){return this.getFullPath()+this.type}async validate(e,t,o){return!1}toJSON(){return{type:this.type,options:this.options,path:this.#t}}}},7391:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(o(8395)),s=i(o(7640)),r=({model:e})=>{const t=a.default.getFromSlug(e);return t.controllersScope?t.controllersScope:t&&t.scope!==s.default.GLOBAL?"project":"global"},l={modelCount:{path:"/:model/count",methods:["get","post"],secured:!0,scope:r},modelCreate:{path:"/:model",methods:["post"],secured:!0,scope:r},modelDelete:{path:"/:model/:id?",methods:["delete"],secured:!0,scope:r},modelQuery:{path:"/:model/query",methods:["get","post"],secured:!0,scope:r},modelRead:{path:"/:model/:id?",methods:["get"],secured:!0,scope:r},modelUpdate:{path:"/:model/:id?",methods:["patch"],secured:!0,scope:r},currentAccount:{path:"/accounts/current",methods:["get"],scope:"project",secured:!0},currentUser:{path:"/users/current",methods:["get"],scope:"global",secured:!0},confirmEmail:{path:"/confirm-email",methods:["post"],scope:"global",secured:!1},infos:{path:"/",methods:["get"],scope:"global",secured:!1},infosProject:{path:"/",methods:["get"],scope:"project",secured:!1},loginAccount:{path:"/auth/login",methods:["post"],scope:"project",secured:!1},genAccountToken:{path:"/accounts/:id/gen-token",methods:["post"],scope:"project",secured:!0},loginUser:{path:"/auth/login",methods:["post"],scope:"global",secured:!1},gdxQuery:{path:"/gdx/query",methods:["post"],scope:"project",secured:!0},gdxSync:{path:"/gdx/sync",methods:["post"],scope:"project",secured:!0},openapiGlobal:{path:"/oas/global",methods:["get"],scope:"global",secured:!1},openapiProject:{path:"/oas/project",methods:["get"],scope:"global",secured:!1},openapiCurrent:{path:"/oas/current",methods:["get"],scope:"project",secured:!1},refreshTokenUser:{path:"/auth/refresh",methods:["post"],scope:"global",secured:!1},refreshTokenAccount:{path:"/auth/refresh",methods:["post"],scope:"project",secured:!1},genTokenToken:{path:"/tokens/:id/gen",methods:["post"],scope:"project",secured:!0},genKeyToken:{path:"/keys/:id/gen",methods:["post"],scope:"project",secured:!1},genKeyPair:{path:"/keys/gen-key-pair",methods:["post"],scope:"project",secured:!0},oauth:{path:"/auth/oauth",methods:["get","post"],scope:"global",secured:!1},registerUser:{path:"/auth/register",methods:["post"],scope:"global",secured:!1},registerAccount:{path:"/auth/register",methods:["post"],scope:"project",secured:!1},handleAuth:{path:"/auth/handle",methods:["get"],scope:"project",secured:!1},codeAuth:{path:"/auth/code",methods:["get"],scope:"project",secured:!1},configureAuth:{path:"/auth/configure",methods:["post"],scope:"project",secured:!0},mediaPublic:{path:"/medias/public/:id",methods:["get"],scope:"project",secured:!1},mediaPrivate:{path:"/medias/private/:id",methods:["get"],scope:"project",secured:!0},statusSockethook:{path:"/sockethooks/:id/status",methods:["get"],scope:"project",secured:!0},subscriptionsWebhook:{path:"/subscriptions/stripe-webhook",methods:["post"],scope:"global",secured:!1},subscriptionsUpgrade:{path:"/subscriptions/upgrade",methods:["post"],scope:"project",secured:!0},subscriptionsCurrent:{path:"/subscriptions/current",methods:["get"],scope:"project",secured:!0},subscriptionsPortal:{path:"/subscriptions/portal",methods:["get"],scope:"project",secured:!0},organizationInvite:{path:"/organizations/:id/invite",methods:["post"],scope:"global",secured:!0},organizationJoin:{path:"/organizations/:id/join",methods:["post"],scope:"global",secured:!0},organizationConsent:{path:"/organizations/:id/consent",methods:["post"],scope:"global",secured:!0},termsLatest:{path:"/terms/latest",methods:["get"],scope:"global",secured:!1},recoverPassword:{path:"/recover-password/:id?",methods:["post"],scope:"global",secured:!1},jobLogs:{path:"/jobs/:id/logs",methods:["get"],scope:"project",secured:!0},searchQuery:{path:"/search/:id/query",methods:["post"],scope:"project",secured:!0},searchCount:{path:"/search/:id/count",methods:["post"],scope:"project",secured:!0},searchReset:{path:"/search/:id/reset",methods:["post"],scope:"project",secured:!0},backupRestore:{path:"/backups/:id/restore",methods:["post"],scope:"project",secured:!0},mrGDX:{path:"/merge-requests/:id/gdx",methods:["get"],scope:"project",secured:!0}};t.default=l},7571:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(o(5590)),s=i(o(867)),r=i(o(9012)),l=i(o(8395)),d=o(5726),n=i(o(2402)),c=i(o(9781)),u=i(o(5286)),f=i(o(2140)),p=i(o(5194));class h extends s.default{serialize(e){return"string"==typeof e?e:String(e)}}class y extends s.default{serialize(e){return parseFloat(e)}}class g extends s.default{serialize(e){return Boolean(e)}}class _ extends s.default{serialize(e){return e instanceof Date?e:new Date(e)}}class m extends s.default{async validate(e){return!e.map((e=>e.get(this.path,r.default.VALIDATION))).flat(1/0).some((e=>null!=e&&(this.options.options?.length&&this.options.strict?!this.options.options.includes(e):!!(0,d.isObjectId)(e))))}serialize(e,t){const o=Array.isArray(e)?String(e[0]):String(e);if(!this.options.options?.length||!this.options.strict||this.options.options.includes(o)||t===r.default.VALIDATION)return o}}class E extends s.default{nextFieldEqObject=!1;async validate(e){return!e.map((e=>e.get(this.path,r.default.VALIDATION))).flat(1/0).some((e=>null!=e&&!(0,d.isObjectId)(e)))}_serializeJSON=(e,t,o,i={})=>{if(!e)return null;let s;s=e instanceof l.default?e._id:e instanceof u.default&&"string"==typeof e.query?e.query:e;const r=o.model.getAdapter();return(0,d.getFieldFromDefinition)({type:a.default.ID},r,"_id").serialize(s,t,o,i)};_serializeObject=(e,t,o,i={})=>{const s=o.model.getAdapter(),r=l.default.getFromSlug(this.options.ref,s.base);if(!(0,d.isObjectId)(e))return null;const n=(0,d.getFieldFromDefinition)({type:a.default.ID},s,"_id").serialize(e,t,o,i);return r.get(n,i?.transactionCtx)};serialize(e,t,o,i={}){return[r.default.JSON,r.default.DOCUMENT,r.default.NEXT_FIELD,r.default.VALIDATION].includes(t)?this._serializeJSON(e,t,o,i):this._serializeObject(e,t,o,i)}}class O extends s.default{async validate(e){return!e.map((e=>e.get(this.path,r.default.VALIDATION))).flat(1/0).some((e=>null!=e&&"object"!=typeof e))}serialize(e,t,o,i={}){e=Array.isArray(e)?e[0]:e;const a=i.outputFormat||t;if(!e||"object"!=typeof e)return a===r.default.VALIDATION||void 0===e?e:null;const s=o.model.getAdapter(),l=(0,d.getNestedFieldsMap)(o.model,this),n=(e,n)=>{let c=l.get(n),u=e[n];if(!c){if(this.options?.strict)return;if(!this.options?.defaultField)return u;c=(0,d.getFieldFromDefinition)(this.options.defaultField,s,[this.path,n].join("."))}return(i?.defaults??a!==r.default.DOCUMENT)&&void 0===u&&"default"in c.options&&(u=c.options.default),null!=u&&(u=c.serialize(u,t,o,i)),u};return[r.default.JSON,r.default.DOCUMENT].includes(t)?(e=>{const a={};for(const[s,r]of l)void 0===e[s]||null===e[s]?a[s]=e[s]:a[s]=r.serialize(e[s],t,o,i);if(this.options.strict)return a;if(this.options.defaultField){const r=Object.keys(e).filter((e=>!l.has(e)));r.length&&r.forEach((r=>{if(void 0===e[r]||null===e[r])a[r]=e[r];else{const l=(0,d.getFieldFromDefinition)(this.options.defaultField,s,[this.path,r].join("."));a[r]=l.serialize(e[r],t,o,i)}}))}return{...e,...a}})(e):new Proxy(e,{get:(e,t)=>"__isProxy"===t||n(e,t)})}}class v extends s.default{async validate(e){return!e.map((e=>e.get(this.path,r.default.VALIDATION))).flat(1/0).some((e=>{if(null==e)return!1;const[t,o]=e.split(":");return!Object.values(p.default).includes(t)||!(0,d.isObjectId)(o)}))}}class D extends s.default{nextFieldEqObject=!1;_serializeRelationArray(e,t,o,i,s={}){const u=i.model.getAdapter();if(o===r.default.OBJECT){const a=l.default.getFromSlug(e.ref,u.base);if(!t?.every(d.isObjectId))throw new n.default({message:`Error serializing array of relations with ids ${t}`});let r;return r=a.isSingle()?(t=Array.isArray(t)?t:[t]).map(((e,t)=>(0,d.getFieldFromDefinition)(this.options.items,u,this.path+`.[${t}]`).serialize(e,o,i,s))):a.getList({ids:t},s?.transactionCtx),r}if((t instanceof c.default||t instanceof f.default)&&(t=t.getIds()),!t)return[];const p=(0,d.getFieldFromDefinition)({type:a.default.ID},u,"_id");return t.map((e=>p.serialize(e,o,i,s)))}serialize(e,t,o,i={}){if(this.options.items?.type===a.default.RELATION)return this._serializeRelationArray(this.options.items?.options,e,t,o,i);const s=o.model.getAdapter();return(e=Array.isArray(e)?e:[e]).map(((e,a)=>(0,d.getFieldFromDefinition)(this.options.items,s,this.path+`.[${a}]`).serialize(e,t,o,i)))}}const R={[a.default.ID]:h,[a.default.NUMBER]:y,[a.default.BOOLEAN]:g,[a.default.DATE]:_,[a.default.TEXT]:m,[a.default.RELATION]:E,[a.default.NESTED]:O,[a.default.IDENTITY]:v,[a.default.ARRAY]:D};t.default=R},5852:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(o(6638)),s=i(o(2361)),r=i(o(2201)),l=o(5726),d=["accounts_authProviders","authProviders","backups","datamodels","environments","jobs","keys","organizations","projects","roles","searchConfigs","sockethooks","terms","tokens","users","mergeRequests","mergeRequestEvents"];class n extends a.default{async validate(e){const t=this.getFullPath(),o=e.map((e=>e.get(t))).flat(1/0);return!o?.length||!o.some((e=>[null,void 0,""].includes(e)))}}class c extends a.default{async validate(e){const t=this.getFullPath(),o=e.map((e=>e.get(t))).flat(1/0).filter((e=>![null,void 0,""].includes(e)));if(!o?.length)return!0;const i=new Set;return!o.some((e=>!!i.has(e)||(i.add(e),!1)))}}class u extends a.default{async validate(e){const t=this.getFullPath(),o=e.map((e=>e.get(t))).flat(1/0).filter((e=>![null,void 0,""].includes(e)));if(!o?.length)return!0;const i=new RegExp(this.options.pattern,this.options.options?.join(""));return!o.some((e=>!i.test(e)))}}class f extends a.default{async validate(e,t,o){const i=t?.getAdapter(),l=i?.validatorsMap??{},d=e=>{let t=l[e];return void 0===t&&(t=_[e]),t||a.default},n=new(d(s.default.REGEX))({type:s.default.REGEX,options:{field:this.options.field,pattern:r.default.SLUG}},this.path),c=new(d(s.default.REQUIRED))({type:s.default.REQUIRED,options:{field:this.options.field}},this.path),u=new(d(s.default.UNIQUE))({type:s.default.UNIQUE,options:{field:this.options.field}},this.path);return(await Promise.all([n.validate(e,t,o),c.validate(e,t,o),u.validate(e,t,o)])).every(Boolean)}}class p extends a.default{async validate(e){const t=this.getFullPath(),o=e.map((e=>e.get(t))).flat(1/0).filter((e=>![null,void 0].includes(e)));if(!o?.length)return!0;const{min:i,max:a}=this.options;return!o.some((e=>{let t=e?.length??0;return"number"==typeof e&&(t=String(e).length),t<i||t>a}))}}class h extends a.default{async validate(e){const t=this.getFullPath(),o=e.map((e=>e.get(t))).flat(1/0).filter((e=>![null,void 0].includes(e)));if(!o?.length)return!0;const{min:i,max:a}=this.options;return!o.some((e=>{const t=parseFloat(e);return t<i||t>a}))}}class y extends a.default{async validate(e){const t=e.map((e=>e.get("slug"))).filter((e=>![null,void 0].includes(e)));return!t?.length||!t.some((e=>d.includes(e)))}}class g extends a.default{async validate(e){return!e.some((e=>!(0,l.isValidDefinition)(e.definition)))}}const _={[s.default.REQUIRED]:n,[s.default.UNIQUE]:c,[s.default.REGEX]:u,[s.default.KEY_FIELD]:f,[s.default.DATAMODEL_SLUG]:y,[s.default.DATAMODEL_DEFINITION]:g,[s.default.LENGTH]:p,[s.default.BOUNDARIES]:h};t.default=_},2580:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fieldDecorator=void 0,t.fieldDecorator=(e,t)=>(o,i)=>{const a=o.model.getBaseClass();a.hasOwnProperty("definition")&&a.definition||(a.definition={}),a.definition.fields??={},a.definition.fields[String(i)]={type:e,options:t}}},317:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.modelDecorator=void 0;const i=o(5726);t.modelDecorator=()=>e=>class extends e{constructor(e){super(e),(0,i.defineFieldsProperties)(this)}}},5726:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidDefinition=t.getModelInitPromise=t.assignDatamodel=t.crossFields=t.validateModel=t.getNestedFieldsArrayForModel=t._setter=t._getter=t.getAdaptedModel=t.defineFieldsProperties=t.isObjectId=t.getDefaultValidatorOptions=t.getDefaultFieldOptions=t.getValidatorFromDefinition=t.getFieldFromDefinition=t.getValidatorClass=t.getFieldClass=t.createValidatorsArray=t.createFieldsMap=t.parseValidatorHook=t.getArrayValidatorsArray=t.getArrayItemsFieldsMap=t.getNestedValidatorsArray=t.getNestedFieldsMap=t.getRecursiveHooksFromModel=t.getFieldsPathsFromPath=t.getRecursiveValidatorsFromModel=t.getRecursiveFieldsFromModel=t.crossModelTree=void 0;const a=i(o(8395)),s=i(o(5590)),r=i(o(7571)),l=i(o(867)),d=i(o(2361)),n=i(o(5852)),c=i(o(6638)),u=i(o(348)),f=i(o(2402)),p=i(o(9012)),h=i(o(9647)),y=i(o(797)),g=i(o(2201));t.crossModelTree=(e,t)=>{let o=e;do{t(o),o=o.__proto__}while(o&&o!==a.default);t(a.default)},t.getRecursiveFieldsFromModel=e=>{let o={};return(0,t.crossModelTree)(e,(e=>{if(e.hasOwnProperty("definition")){const t=e.definition.fields||{};o={...t,...o}}})),o},t.getRecursiveValidatorsFromModel=e=>{const o=[],i=e.getKeyField();return(0,t.crossModelTree)(e,(e=>{if(e.hasOwnProperty("definition")){const t=e.definition.validators||[];Array.prototype.push.apply(o,t)}})),i&&"_id"!==i?(o.push({type:d.default.KEY_FIELD,options:{field:i}}),o.filter((e=>!(e.type===d.default.UNIQUE&&e.options?.field===i||e.type===d.default.REQUIRED&&e.options?.field===i)))):o},t.getFieldsPathsFromPath=(e,o)=>{const i=(o=Array.isArray(o)?o:o.split(".")).shift(),a=e.fieldsMap?.get(i),r=e.getAdapter(!1);return o.reduce(((e,o)=>{const i=e[e.length-1]?.field,a=e.map((e=>e?.key)).join(".");if(i?.type===s.default.ARRAY){const l=i.options,d=o.match(/\[(\d+)?\]/);if(d){const o=d[1]?parseInt(d[1]):null;if(null!==o){const i=(0,t.getFieldFromDefinition)(l.items,r,a+`.[${o}]`);return[...e,{key:`[${o}]`,field:i}]}}const n=(0,t.getFieldFromDefinition)(l.items,r,a+".[]");if(e.push({key:"[]",field:n}),d)return e;if(n?.type===s.default.NESTED){const i=n.options.fields[o],s=(0,t.getFieldFromDefinition)(i,r,a+".[]."+o);if(s)return[...e,{key:o,field:s}]}}if(i?.type===s.default.NESTED){const s=i.options,l=s.fields?.[o]||s.defaultField,d=(0,t.getFieldFromDefinition)(l,r,a+"."+o);if(d)return[...e,{key:o,field:d}]}return[...e,null]}),[a?{key:i,field:a}:null])},t.getRecursiveHooksFromModel=(e,o,i)=>{const a=[];return(0,t.crossModelTree)(e,(e=>{if(e.hasOwnProperty("__hooks")){const t=Array.from(e.__hooks||[]).filter((e=>e.action===o&&e.phase===i));t?.length&&Array.prototype.push.apply(a,t)}})),a.sort(((e,t)=>e.order-t.order))},t.getNestedFieldsMap=(e,o)=>{const i=e.getAdapter(),a=new Map;return Object.entries(o.options.fields??{}).forEach((([e,s])=>{const r=(0,t.getFieldFromDefinition)(s,i,o.path+"."+e);r&&a.set(e,r)})),a},t.getNestedValidatorsArray=(e,o)=>{const i=e.getAdapter(),a=[];return o.options.validators?.forEach((e=>{const s=(0,t.getValidatorFromDefinition)(e,i,o.path);s&&a.push(s)})),a},t.getArrayItemsFieldsMap=(e,o)=>{const i=e.getAdapter(),a=new Map,s=(0,t.getFieldFromDefinition)(o.options.items,i,o.path+".[]");return s&&a.set("[]",s),a},t.getArrayValidatorsArray=(e,o)=>{const i=e.getAdapter(),a=[];return o.options.validators?.forEach((e=>{const s=(0,t.getValidatorFromDefinition)(e,i,o.path+".[]");s&&a.push(s)})),a},t.parseValidatorHook=(e,t)=>{const[o,i,a]=e;return{phase:o,action:i,fn:async function(...e){try{if(!await a.apply(this,e))throw null}catch(e){throw new u.default({validator:t})}}}},t.createFieldsMap=e=>{const o=(0,t.getRecursiveFieldsFromModel)(e);e.systemFields||(delete o._createdAt,delete o._createdBy,delete o._updatedAt,delete o._updatedBy);const i=new Map,a=e.getAdapter(!1);return Object.entries(o).forEach((([e,o])=>{const s=(0,t.getFieldFromDefinition)(o,a,e);s&&i.set(e,s)})),i},t.createValidatorsArray=e=>{const o=(0,t.getRecursiveValidatorsFromModel)(e),i=e.getAdapter(!1);return o.map((e=>(0,t.getValidatorFromDefinition)(e,i,null)))},t.getFieldClass=(e,t)=>{let o=t?.fieldsMap?.[e];return o||(o=r.default[e]),o||(o=l.default),o},t.getValidatorClass=(e,t)=>{let o=t?.validatorsMap?.[e];return o||(o=n.default[e]),o||(o=c.default),o},t.getFieldFromDefinition=(e,o,i)=>e&&"object"==typeof e?new((0,t.getFieldClass)(e.type,o))(e,i):null,t.getValidatorFromDefinition=(e,o,i)=>e&&"object"==typeof e?new((0,t.getValidatorClass)(e.type,o))(e,i):null,t.getDefaultFieldOptions=e=>({}),t.getDefaultValidatorOptions=e=>{switch(e){case d.default.LENGTH:case d.default.BOUNDARIES:return{min:-1/0,max:1/0};default:return{}}},t.isObjectId=e=>/^[a-f\d]{24}$/i.test(e),t.defineFieldsProperties=e=>{const{model:t}=e;if(!t.__fieldsProperties){const e={};for(const o of t.fieldsKeys)e[o]={enumerable:!0,configurable:!0,get(){return this.get(o)},set(e){if(void 0!==e)return this.set(o,e);console.warn("cannot set undefined value with = operator. Please use .set method instead")}};t.__fieldsProperties=e}Object.defineProperties(e,t.__fieldsProperties)},t.getAdaptedModel=(e,t,o)=>{if(!t)throw new f.default({message:"Adapter is required in getAdaptedModel method"});let i;return o||(i=t.modelsMap.get(e.slug)),i||(i=e.withAdapter(t),t.modelsMap.set(e.slug,i)),i};const _=(e,t,o)=>t.field.path.replace(e.path,o);t._getter=e=>{let{_value:o,_lastField:i}=e;const{_fieldsPaths:a,noFieldSymbol:s,format:r,from:l,ctx:d}=e,n=a[a.length-1]?.field;i??=n;for(let c=0;c<a.length;c++){const u=a[c];if(!u)return s;const{key:f,field:h}=u;if((d?.defaults??r!==p.default.DOCUMENT)&&void 0===o&&"default"in h.options&&(o=h.options.default),null==o)return o;const y=a.slice(c+1),g=f.match(/\[(\d+)?\]/);if(g){if(!Array.isArray(o))return s;if(void 0===g[1]){const i=l.model.getAdapter();return o.map(((o,a)=>{const r=h.path.replace(/\[\]$/,`[${a}]`),l=y.map((e=>e?{...e,field:(0,t.getFieldFromDefinition)(e.field.definition,i,_(h,e,r))}:e)),d=(0,t._getter)({...e,_value:o,_fieldsPaths:l,_lastField:n});return d===s?void 0:d}))}const i=parseInt(g[1]);if(o.length<=i)return s;const a=(0,t._getter)({...e,_value:o[i],_fieldsPaths:y,_lastField:n});return a===s?void 0:a}if(!o||"object"!=typeof o)break;const m=o[f];if(null==m)return m;o=h===i?m:h.serialize(m,p.default.NEXT_FIELD,l,d)}return!i||i?.nextFieldEqObject&&r===p.default.OBJECT?o:i.serialize(o,r,l,d)},t._setter=e=>{const{_assignTo:o,_fieldsPaths:i,_throw:a,_value:s,ctx:r,from:l}=e;let d=o,n=i.shift();for(let o=0;o<i.length;o++){const s=i[o];if(s||a(),d[n.key]??={},d=d[n.key],n=s,"[]"===n.key){if(Array.isArray(d)&&d.length){const a=i.slice(o+1);d=d.map(((o,i)=>(0,t._setter)({...e,_assignTo:d,_fieldsPaths:[{key:i,field:n.field},...a]})))}return d}}return n?.field&&d&&"object"==typeof d?(d[n.key]=n.field.serialize(s,p.default.DOCUMENT,l,r),d[n.key]):null},t.getNestedFieldsArrayForModel=e=>{const o=[];return(0,t.crossFields)({model:e},(e=>{o.push(e)})),o},t.validateModel=async(e,o,i)=>{const r=new Set,l=new Set,d=o.map((t=>t instanceof a.default?t:new e({...t}))),n=new Set,c=[],f=async(o,a=d)=>{for(const l of o){const{type:o,path:d}=l;try{if(!await l.validate(a,e,i))throw null;if(o===s.default.NESTED){const o=a.map((e=>e.get(d,p.default.VALIDATION))).flat(1/0).filter(Boolean);if(o?.length){const i=l,r=i.options||{};if(r.defaultField){const l=o.map((e=>Object.keys(e).filter((e=>!r.fields?.[e])))).flat();if(l?.length){const o=e.getAdapter(),d=async(i,a)=>{const l=(0,t.getFieldFromDefinition)(r.defaultField,o,i),d=[f([l],a)];if(l?.type===s.default.NESTED){const o=(0,t.getNestedFieldsMap)(e,l);d.push(f(Array.from(o.values()),a))}await Promise.all(d)};await Promise.all(l.map((async e=>{const t=i.path+`.${e}`,o=new Map;a.forEach((e=>{const i=e.get(t,p.default.VALIDATION);if(i&&(!Array.isArray(i)||i.length)){const t=JSON.stringify({value:i});o.has(t)||o.set(t,{list:[],arrayLength:Array.isArray(i)?i.length:void 0}),o.get(t).list.push(e)}})),o.size&&await Promise.all(Array.from(o.values()).map((async({list:e,arrayLength:o})=>{void 0!==o?await Promise.all(Array.from({length:o}).map(((o,i)=>d(t.replace(/\[\]/,`[${i}]`),e)))):await d(t,e)})))})))}}(0,t.getNestedValidatorsArray)(e,i).forEach((e=>{const t=e.getKey();n.has(t)||(c.push([e,a]),n.add(t))}))}}if(o===s.default.ARRAY){const o=l,i=a.map((e=>[e,e.get(d,p.default.VALIDATION)])).filter((e=>Boolean(e[1]))),s=i.map((e=>e[1])).flat(1/0).filter(Boolean);if(s?.length){const a=(0,t.getArrayValidatorsArray)(e,o),s=i.map((e=>e[0]));a.forEach((e=>{const t=e.getKey();n.has(t)||(c.push([e,s]),n.add(t))}));const r=(0,t.getArrayItemsFieldsMap)(e,o);await f(Array.from(r.values()),s)}}}catch(e){const t=new h.default({slug:l.path.split(".").pop(),field:l,validationError:e instanceof y.default?e:null});r.add(t)}}},g=async t=>{await Promise.all(t.map((async([t,o])=>{try{if(!await t.validate(o,e,i))throw null}catch(e){const o=new u.default({validator:t});l.add(o)}})))},_=()=>{if(r.size||l.size)throw new y.default({fields:[...r],validators:[...l]})};return await f((0,t.getNestedFieldsArrayForModel)(e)),_(),e.validatorsArray?.length&&(await g(e.validatorsArray.map((e=>[e,d]))),_()),n.size&&(await g(c),_()),!0},t.crossFields=(e,o)=>{const{model:i}=e;return(e.fieldsMap||e.model.fieldsMap).forEach((e=>{o(e),e.type===s.default.ARRAY?(0,t.crossFields)({model:i,fieldsMap:(0,t.getArrayItemsFieldsMap)(i,e)},o):e.type===s.default.NESTED&&(0,t.crossFields)({model:i,fieldsMap:(0,t.getNestedFieldsMap)(i,e)},o)})),t.crossFields},t.assignDatamodel=async(e,o)=>{if(!o)return e.definition={},void(e.__dm=null);e.definition=o.getDoc()?.definition??{},e.__fieldsMap=(0,t.createFieldsMap)(e),e.__validatorsArray=(0,t.createValidatorsArray)(e),delete e.__fieldsProperties,delete e.__fieldsKeys,e.__dm=String(o._id)},t.getModelInitPromise=(e,o={})=>{const{datamodel:i,ctx:a}=o;return new Promise((async(o,s)=>{try{const o=(0,t.getRecursiveHooksFromModel)(e,"initialize","before");await o.reduce((async(t,o)=>(await t,o.fn.call(e))),Promise.resolve()),e.extensible&&await e.reloadModel({datamodel:i,ctx:a});const s=(0,t.getRecursiveHooksFromModel)(e,"initialize","after");await s.reduce((async(t,o)=>(await t,o.fn.call(e))),Promise.resolve())}catch(e){s(e)}o()}))},t.isValidDefinition=e=>{const t=e?.fields;if(t){const e=Object.keys(t||{}),o=new RegExp(g.default.SLUG);for(const t of e)if(!o.test(t))return!1}const o=e?.keyField;if(o){const e=t?.[o];if(!e)return!1;if(e.type!==s.default.TEXT)return!1;if(e.options?.default)return!1}return!0}},9114:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=s(o(7808)),c=o(317),u=s(o(5590)),f=s(o(2361)),p=s(o(9407)),h=s(o(2201));let y=class extends r.default{static __name="Account";static searchable=!0;static extensible=!0;static scope=l.default.ENV;static slug="accounts";static definition={validators:[{type:f.default.REQUIRED,options:{field:"email"}},{type:f.default.REQUIRED,options:{field:"role"}},{type:f.default.UNIQUE,options:{field:"email"}},{type:f.default.REGEX,options:{field:"email",pattern:h.default.EMAIL}}]};firstname;lastname;email;role;_user;_lastLoginAt};i([(0,d.fieldDecorator)(u.default.TEXT),a("design:type",String)],y.prototype,"firstname",void 0),i([(0,d.fieldDecorator)(u.default.TEXT),a("design:type",String)],y.prototype,"lastname",void 0),i([(0,d.fieldDecorator)(u.default.TEXT),a("design:type",String)],y.prototype,"email",void 0),i([(0,d.fieldDecorator)(u.default.RELATION,{ref:n.default.slug}),a("design:type",Object)],y.prototype,"role",void 0),i([(0,d.fieldDecorator)(u.default.RELATION,{ref:p.default.slug}),a("design:type",Object)],y.prototype,"_user",void 0),i([(0,d.fieldDecorator)(u.default.DATE),a("design:type",Object)],y.prototype,"_lastLoginAt",void 0),y=i([(0,c.modelDecorator)()],y),t.default=y},8091:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(2361)),f=s(o(9114)),p=s(o(3232));let h=class extends r.default{static __name="AccountAuthProvider";static slug="accounts_authProviders";static definition={validators:[{type:u.default.REQUIRED,options:{field:"account"}},{type:u.default.REQUIRED,options:{field:"provider"}}]};static exposed=!1;static systemFields=!1;static scope=l.default.ENV;account;provider;configuration};i([(0,d.fieldDecorator)(c.default.RELATION,{ref:f.default.slug}),a("design:type",Object)],h.prototype,"account",void 0),i([(0,d.fieldDecorator)(c.default.RELATION,{ref:p.default.slug}),a("design:type",Object)],h.prototype,"provider",void 0),i([(0,d.fieldDecorator)(c.default.NESTED),a("design:type",Object)],h.prototype,"configuration",void 0),h=i([(0,n.modelDecorator)()],h),t.default=h},3232:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(71)),f=s(o(7808));let p=class extends r.default{static __name="AuthProvider";static slug="authProviders";static definition={keyField:"type"};static scope=l.default.ENV;type;options;enabled;register};i([(0,d.fieldDecorator)(c.default.TEXT,{options:Object.values(u.default),strict:!0}),a("design:type",String)],p.prototype,"type",void 0),i([(0,d.fieldDecorator)(c.default.NESTED),a("design:type",Object)],p.prototype,"options",void 0),i([(0,d.fieldDecorator)(c.default.BOOLEAN,{default:!0}),a("design:type",Boolean)],p.prototype,"enabled",void 0),i([(0,d.fieldDecorator)(c.default.NESTED,{fields:{enabled:{type:c.default.BOOLEAN,options:{default:!0}},role:{type:c.default.RELATION,options:{ref:f.default.slug}},options:{type:c.default.NESTED}}}),a("design:type",Object)],p.prototype,"register",void 0),p=i([(0,n.modelDecorator)()],p),t.default=p},367:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(2361)),f=s(o(6875)),p=s(o(7888));let h=class extends r.default{static __name="Backup";static slug="backups";static definition={validators:[{type:u.default.REQUIRED,options:{field:"_project"}},{type:u.default.REQUIRED,options:{field:"_expireAt"}}]};static scope=l.default.GLOBAL;static controllersScope="project";static allowMultipleOperations=!1;_project;_expireAt;_job};i([(0,d.fieldDecorator)(c.default.RELATION,{ref:f.default.slug}),a("design:type",Object)],h.prototype,"_project",void 0),i([(0,d.fieldDecorator)(c.default.DATE),a("design:type",Object)],h.prototype,"_expireAt",void 0),i([(0,d.fieldDecorator)(c.default.RELATION,{ref:p.default.slug}),a("design:type",Object)],h.prototype,"_job",void 0),h=i([(0,n.modelDecorator)()],h),t.default=h},3846:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(2361));let f=class extends r.default{static __name="DataModel";static slug="datamodels";static definition={keyField:"slug",validators:[{type:u.default.DATAMODEL_SLUG},{type:u.default.DATAMODEL_DEFINITION}]};static scope=l.default.ENV;name;slug;definition;_doc};i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],f.prototype,"name",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],f.prototype,"slug",void 0),i([(0,d.fieldDecorator)(c.default.NESTED,{fields:{fields:{type:c.default.NESTED,options:{defaultField:{type:c.default.NESTED,options:{fields:{type:{type:c.default.TEXT,options:{options:Object.values(c.default),strict:!0}},options:{type:c.default.NESTED}},validators:[{type:u.default.REQUIRED,options:{field:"type"}}]}}}},validators:{type:c.default.ARRAY,options:{items:{type:c.default.NESTED,options:{fields:{type:{type:c.default.TEXT,options:{options:Object.values(u.default),strict:!0}},options:{type:c.default.NESTED}},validators:[{type:u.default.REQUIRED,options:{field:"type"}}]}}}},single:{type:c.default.BOOLEAN,options:{default:!1}},keyField:{type:c.default.TEXT}}}),a("design:type",Object)],f.prototype,"definition",void 0),i([(0,d.fieldDecorator)(c.default.NESTED),a("design:type",Object)],f.prototype,"_doc",void 0),f=i([(0,n.modelDecorator)()],f),t.default=f},5577:function(e,t,o){var i,a=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=r(o(8395)),d=r(o(7640)),n=o(2580),c=o(317),u=r(o(5590)),f=r(o(2361)),p=r(o(7888)),h=r(o(8439));let y=i=class extends l.default{static __name="Environment";static slug="environments";static definition={keyField:"name",validators:[{type:f.default.REGEX,options:{field:"name",pattern:"^(?!master$|main$).*$"}}]};static scope=d.default.PROJECT;static allowMultipleOperations=!1;name;base;_job;_fromRequest};a([(0,n.fieldDecorator)(u.default.TEXT),s("design:type",String)],y.prototype,"name",void 0),a([(0,n.fieldDecorator)(u.default.RELATION,{ref:i.slug}),s("design:type",Object)],y.prototype,"base",void 0),a([(0,n.fieldDecorator)(u.default.RELATION,{ref:p.default.slug}),s("design:type",Object)],y.prototype,"_job",void 0),a([(0,n.fieldDecorator)(u.default.RELATION,{ref:h.default.slug}),s("design:type",Object)],y.prototype,"_fromRequest",void 0),y=i=a([(0,c.modelDecorator)()],y),t.default=y},7888:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(391)),f=s(o(8250));let p=class extends r.default{static __name="Job";static slug="jobs";static scope=l.default.PROJECT;_type;_status;_refs;_startedAt;_completedAt;_alerts;_result};i([(0,d.fieldDecorator)(c.default.TEXT,{options:Object.values(u.default),strict:!0}),a("design:type",String)],p.prototype,"_type",void 0),i([(0,d.fieldDecorator)(c.default.TEXT,{options:Object.values(f.default),strict:!0,default:f.default.QUEUED}),a("design:type",String)],p.prototype,"_status",void 0),i([(0,d.fieldDecorator)(c.default.ARRAY,{items:{type:c.default.TEXT}}),a("design:type",Array)],p.prototype,"_refs",void 0),i([(0,d.fieldDecorator)(c.default.DATE),a("design:type",Object)],p.prototype,"_startedAt",void 0),i([(0,d.fieldDecorator)(c.default.DATE),a("design:type",Object)],p.prototype,"_completedAt",void 0),i([(0,d.fieldDecorator)(c.default.ARRAY,{items:{type:c.default.NESTED}}),a("design:type",Object)],p.prototype,"_alerts",void 0),i([(0,d.fieldDecorator)(c.default.NESTED),a("design:type",Object)],p.prototype,"_result",void 0),p=i([(0,n.modelDecorator)()],p),t.default=p},1101:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(2361));let f=class extends r.default{static __name="Key";static slug="keys";static definition={keyField:"name",validators:[{type:u.default.REQUIRED,options:{field:"value"}}]};static scope=l.default.PROJECT;name;value};i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],f.prototype,"name",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",Object)],f.prototype,"value",void 0),f=i([(0,n.modelDecorator)()],f),t.default=f},3731:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(317),n=s(o(2361)),c=o(2580),u=s(o(5590));let f=class extends r.default{static __name="Media";static slug="medias";static definition={keyField:"name",validators:[{type:n.default.REQUIRED,options:{field:"_mimetype"}},{type:n.default.REQUIRED,options:{field:"_originalname"}},{type:n.default.BOUNDARIES,options:{field:"_size",min:1}}]};static searchable=!0;static extensible=!0;static scope=l.default.PROJECT;name;private;_mimetype;_originalname;_size;file};i([(0,c.fieldDecorator)(u.default.TEXT),a("design:type",String)],f.prototype,"name",void 0),i([(0,c.fieldDecorator)(u.default.BOOLEAN,{default:!1}),a("design:type",Boolean)],f.prototype,"private",void 0),i([(0,c.fieldDecorator)(u.default.TEXT),a("design:type",String)],f.prototype,"_mimetype",void 0),i([(0,c.fieldDecorator)(u.default.TEXT),a("design:type",String)],f.prototype,"_originalname",void 0),i([(0,c.fieldDecorator)(u.default.NUMBER),a("design:type",Number)],f.prototype,"_size",void 0),f=i([(0,d.modelDecorator)()],f),t.default=f},8439:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(7888)),f=s(o(2361)),p=s(o(2983));let h=class extends r.default{static __name="MergeRequest";static slug="mergeRequests";static definition={keyField:"slug",validators:[{type:f.default.REQUIRED,options:{field:"options"}},{type:f.default.REQUIRED,options:{field:"target"}}]};static scope=l.default.PROJECT;static allowMultipleOperations=!1;slug;type;options;target;_closed;_job};i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],h.prototype,"slug",void 0),i([(0,d.fieldDecorator)(c.default.TEXT,{options:Object.values(p.default),strict:!0,default:p.default.STATIC}),a("design:type",String)],h.prototype,"type",void 0),i([(0,d.fieldDecorator)(c.default.NESTED),a("design:type",Object)],h.prototype,"options",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],h.prototype,"target",void 0),i([(0,d.fieldDecorator)(c.default.BOOLEAN),a("design:type",Boolean)],h.prototype,"_closed",void 0),i([(0,d.fieldDecorator)(c.default.RELATION,{ref:u.default.slug}),a("design:type",Object)],h.prototype,"_job",void 0),h=i([(0,n.modelDecorator)()],h),t.default=h},2728:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(7888)),f=s(o(2361)),p=s(o(2983)),h=s(o(6361)),y=s(o(8439));let g=class extends r.default{static __name="MergeRequestEvent";static slug="mergeRequestEvents";static definition={validators:[{type:f.default.REQUIRED,options:{field:"request"}}]};static scope=l.default.PROJECT;static allowMultipleOperations=!1;type;data;request;_job};i([(0,d.fieldDecorator)(c.default.TEXT,{options:Object.values(h.default),strict:!0,default:p.default.STATIC}),a("design:type",String)],g.prototype,"type",void 0),i([(0,d.fieldDecorator)(c.default.NESTED),a("design:type",Object)],g.prototype,"data",void 0),i([(0,d.fieldDecorator)(c.default.RELATION,{ref:y.default.slug}),a("design:type",Object)],g.prototype,"request",void 0),i([(0,d.fieldDecorator)(c.default.RELATION,{ref:u.default.slug}),a("design:type",Object)],g.prototype,"_job",void 0),g=i([(0,n.modelDecorator)()],g),t.default=g},886:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(9407)),f=s(o(2361)),p=s(o(7663));let h=class extends r.default{static __name="Organization";static slug="organizations";static definition={keyField:"slug",validators:[{type:f.default.REQUIRED,options:{field:"name"}}]};static scope=l.default.GLOBAL;static allowMultipleOperations=!1;name;slug;owner;_users;_consent};i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],h.prototype,"name",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],h.prototype,"slug",void 0),i([(0,d.fieldDecorator)(c.default.RELATION,{ref:u.default.slug}),a("design:type",Object)],h.prototype,"owner",void 0),i([(0,d.fieldDecorator)(c.default.ARRAY,{items:{type:c.default.RELATION,options:{ref:u.default.slug}}}),a("design:type",Object)],h.prototype,"_users",void 0),i([(0,d.fieldDecorator)(c.default.NESTED,{fields:{terms:{type:c.default.RELATION,options:{ref:p.default.slug}},user:{type:c.default.RELATION,options:{ref:u.default.slug}}}}),a("design:type",Object)],h.prototype,"_consent",void 0),h=i([(0,n.modelDecorator)()],h),t.default=h},6875:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(886)),f=s(o(2361));let p=class extends r.default{static __name="Project";static slug="projects";static definition={keyField:"slug",validators:[{type:f.default.REQUIRED,options:{field:"name"}},{type:f.default.REQUIRED,options:{field:"organization"}}]};static scope=l.default.GLOBAL;static allowMultipleOperations=!1;name;slug;organization;accessTokenLifetime;refreshTokenLifetime;backupSchedule;version};i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"name",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"slug",void 0),i([(0,d.fieldDecorator)(c.default.RELATION,{ref:u.default.slug}),a("design:type",Object)],p.prototype,"organization",void 0),i([(0,d.fieldDecorator)(c.default.NUMBER,{default:86400}),a("design:type",Number)],p.prototype,"accessTokenLifetime",void 0),i([(0,d.fieldDecorator)(c.default.NUMBER,{default:2592e3}),a("design:type",Number)],p.prototype,"refreshTokenLifetime",void 0),i([(0,d.fieldDecorator)(c.default.NESTED,{fields:{enabled:{type:c.default.BOOLEAN,options:{default:!1}},cronExpression:{type:c.default.TEXT}}}),a("design:type",Object)],p.prototype,"backupSchedule",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"version",void 0),p=i([(0,n.modelDecorator)()],p),t.default=p},7808:function(e,t,o){var i,a=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=r(o(8395)),d=r(o(7640)),n=o(2580),c=o(317),u=r(o(5590)),f=r(o(6556)),p=r(o(2361)),h=r(o(2201));let y=i=class extends l.default{static __name="Role";static slug="roles";static definition={keyField:"slug",validators:[{type:p.default.REGEX,options:{field:"slug",pattern:h.default.SLUG}}]};static scope=d.default.ENV;slug;_admin;inherits;systemNotifications;rules;fieldsRestrictions;async getRulesInherited(){let e=this.rules||[];const t=await this.inherits;if(t){const o=await Promise.all(t.map((e=>e.getRulesInherited())));e=[...e,...o.flat()]}return e}async getFieldsRestrictionsInherited(){let e=this.fieldsRestrictions||[];const t=await this.inherits;if(t){const o=await Promise.all(t.map((e=>e.getFieldsRestrictionsInherited())));e=[...e,...o.flat()]}return e}};a([(0,n.fieldDecorator)(u.default.TEXT),s("design:type",String)],y.prototype,"slug",void 0),a([(0,n.fieldDecorator)(u.default.BOOLEAN),s("design:type",Boolean)],y.prototype,"_admin",void 0),a([(0,n.fieldDecorator)(u.default.ARRAY,{items:{type:u.default.RELATION,options:{ref:i.slug}}}),s("design:type",Object)],y.prototype,"inherits",void 0),a([(0,n.fieldDecorator)(u.default.BOOLEAN),s("design:type",Boolean)],y.prototype,"systemNotifications",void 0),a([(0,n.fieldDecorator)(u.default.ARRAY,{items:{type:u.default.NESTED,options:{fields:{ref:{type:u.default.TEXT},actions:{type:u.default.ARRAY,options:{items:{type:u.default.TEXT,options:{options:Object.values(f.default),strict:!0}}}},filter:{type:u.default.NESTED},prohibition:{type:u.default.BOOLEAN}}}}}),s("design:type",Object)],y.prototype,"rules",void 0),a([(0,n.fieldDecorator)(u.default.ARRAY,{items:{type:u.default.NESTED,options:{fields:{ref:{type:u.default.TEXT},actions:{type:u.default.ARRAY,options:{items:{type:u.default.TEXT,options:{options:Object.values(f.default),strict:!0}}}},filter:{type:u.default.NESTED},fields:{type:u.default.ARRAY,options:{items:{type:u.default.TEXT}}}}}}}),s("design:type",Object)],y.prototype,"fieldsRestrictions",void 0),y=i=a([(0,c.modelDecorator)()],y),t.default=y},2624:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(2361)),f=s(o(7888));let p=class extends r.default{static __name="SearchConfig";static slug="searchConfigs";static definition={keyField:"slug",validators:[{type:u.default.REQUIRED,options:{field:"source"}},{type:u.default.REQUIRED,options:{field:"properties"}}]};static scope=l.default.ENV;static allowMultipleOperations=!1;slug;description;source;filter;properties;analysis;_job};i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"slug",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"description",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"source",void 0),i([(0,d.fieldDecorator)(c.default.NESTED),a("design:type",Object)],p.prototype,"filter",void 0),i([(0,d.fieldDecorator)(c.default.NESTED),a("design:type",Object)],p.prototype,"properties",void 0),i([(0,d.fieldDecorator)(c.default.NESTED),a("design:type",Object)],p.prototype,"analysis",void 0),i([(0,d.fieldDecorator)(c.default.RELATION,{ref:f.default.slug}),a("design:type",Object)],p.prototype,"_job",void 0),p=i([(0,n.modelDecorator)()],p),t.default=p},3646:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(317),n=o(2580),c=s(o(5590)),u=s(o(2361));let f=class extends r.default{static __name="Sockethook";static slug="sockethooks";static definition={keyField:"name",validators:[{type:u.default.REQUIRED,options:{field:"on"}},{type:u.default.REQUIRED,options:{field:"phase"}},{type:u.default.REQUIRED,options:{field:"action"}},{type:u.default.BOUNDARIES,options:{field:"order",min:0}}]};static scope=l.default.ENV;name;on;phase;action;blocking;order};i([(0,n.fieldDecorator)(c.default.TEXT),a("design:type",String)],f.prototype,"name",void 0),i([(0,n.fieldDecorator)(c.default.TEXT),a("design:type",String)],f.prototype,"on",void 0),i([(0,n.fieldDecorator)(c.default.TEXT,{options:["before","after"],strict:!0}),a("design:type",String)],f.prototype,"phase",void 0),i([(0,n.fieldDecorator)(c.default.TEXT,{options:["count","get","getList","createOne","createMultiple","updateOne","updateMultiple","deleteOne","deleteMultiple","initialize"],strict:!0}),a("design:type",Object)],f.prototype,"action",void 0),i([(0,n.fieldDecorator)(c.default.BOOLEAN),a("design:type",Boolean)],f.prototype,"blocking",void 0),i([(0,n.fieldDecorator)(c.default.NUMBER,{default:0}),a("design:type",Number)],f.prototype,"order",void 0),f=i([(0,d.modelDecorator)()],f),t.default=f},7663:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590));let u=class extends r.default{static __name="Terms";static slug="terms";static scope=l.default.GLOBAL;introduction;service;privacy;security;payment;legal};i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],u.prototype,"introduction",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],u.prototype,"service",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],u.prototype,"privacy",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],u.prototype,"security",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],u.prototype,"payment",void 0),i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],u.prototype,"legal",void 0),u=i([(0,n.modelDecorator)()],u),t.default=u},2976:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(2580),n=o(317),c=s(o(5590)),u=s(o(7808)),f=s(o(2361));let p=class extends r.default{static __name="Token";static slug="tokens";static definition={keyField:"name",validators:[{type:f.default.REQUIRED,options:{field:"role"}}]};static scope=l.default.PROJECT;name;expiration;lifetime;maxGen;role;_generation};i([(0,d.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"name",void 0),i([(0,d.fieldDecorator)(c.default.DATE),a("design:type",Object)],p.prototype,"expiration",void 0),i([(0,d.fieldDecorator)(c.default.NUMBER),a("design:type",Number)],p.prototype,"lifetime",void 0),i([(0,d.fieldDecorator)(c.default.NUMBER),a("design:type",Number)],p.prototype,"maxGen",void 0),i([(0,d.fieldDecorator)(c.default.RELATION,{ref:u.default.slug}),a("design:type",Object)],p.prototype,"role",void 0),i([(0,d.fieldDecorator)(c.default.NUMBER,{default:0}),a("design:type",Number)],p.prototype,"_generation",void 0),p=i([(0,n.modelDecorator)()],p),t.default=p},9407:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var a,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(s<3?a(r):s>3?a(t,o,r):a(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(o(8395)),l=s(o(7640)),d=o(317),n=o(2580),c=s(o(5590)),u=s(o(2361)),f=s(o(2201));let p=class extends r.default{static __name="User";static definition={validators:[{type:u.default.REQUIRED,options:{field:"firstname"}},{type:u.default.REQUIRED,options:{field:"lastname"}},{type:u.default.REQUIRED,options:{field:"email"}},{type:u.default.REQUIRED,options:{field:"password"}},{type:u.default.UNIQUE,options:{field:"email"}},{type:u.default.REGEX,options:{field:"email",pattern:f.default.EMAIL}}]};static slug="users";static scope=l.default.GLOBAL;firstname;lastname;email;password;pendingEmail};i([(0,n.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"firstname",void 0),i([(0,n.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"lastname",void 0),i([(0,n.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"email",void 0),i([(0,n.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"password",void 0),i([(0,n.fieldDecorator)(c.default.TEXT),a("design:type",String)],p.prototype,"pendingEmail",void 0),p=i([(0,d.modelDecorator)()],p),t.default=p},4089:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(o(8395));a.default.hook("after","createOne",(async function(e){if(this.getAdapter().runValidators&&!e.ctx.disableValidation){const t=await e.res;t&&await this.validate([t],e.ctx)}}),-1),a.default.hook("after","createMultiple",(async function(e){if(this.getAdapter().runValidators&&!e.ctx.disableValidation){const t=await e.res;t&&await this.validate(t,e.ctx)}}),-1),a.default.hook("after","updateOne",(async function(e){if(this.getAdapter().runValidators&&!e.ctx.disableValidation){const t=await e.res;t&&await this.validate([t],e.ctx)}}),-1),a.default.hook("after","updateMultiple",(async function(e){if(this.getAdapter().runValidators&&!e.ctx.disableValidation){const t=await e.res;t&&await this.validate(t,e.ctx)}}),-1)},7683:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),i(o(71)),i(o(8957)),i(o(2983)),i(o(6361))}},t={},o=function o(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,o),s.exports}(341);module.exports=o})();